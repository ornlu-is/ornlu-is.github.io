<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>The name's R... Algorithm R - Luís Franco</title><meta name=Description content="This is my cool site"><meta property="og:title" content="The name's R... Algorithm R"><meta property="og:description" content="A reservoir sampling algorithm to randomly draw a sample of size $n$ from a population of unknown size."><meta property="og:type" content="article"><meta property="og:url" content="https://ornlu-is.github.io/first/"><meta property="og:image" content="https://ornlu-is.github.io/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-02-16T00:34:43+00:00"><meta property="article:modified_time" content="2023-02-26T11:28:53+00:00"><meta property="og:site_name" content="Super website"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://ornlu-is.github.io/logo.png"><meta name=twitter:title content="The name's R... Algorithm R"><meta name=twitter:description content="A reservoir sampling algorithm to randomly draw a sample of size $n$ from a population of unknown size."><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://ornlu-is.github.io/first/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"The name's R... Algorithm R","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/ornlu-is.github.io\/first\/"},"genre":"posts","wordcount":536,"url":"https:\/\/ornlu-is.github.io\/first\/","datePublished":"2023-02-16T00:34:43+00:00","dateModified":"2023-02-26T11:28:53+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Luís Franco"},"description":""}</script></head><body data-header-desktop=auto data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"dark"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"dark"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Luís Franco">Luís Franco</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><a class=menu-item href=/about/>About </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></span></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Luís Franco">Luís Franco</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/categories/ title>Categories</a><a class=menu-item href=/about/ title>About</a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">The name's R... Algorithm R</h1><h2 class=single-subtitle>An introduction to reservoir sampling</h2><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Luís Franco</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2023-02-16>2023-02-16</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;536 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;3 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#random-sampling>Random sampling</a></li><li><a href=#reservoir-sampling>Reservoir sampling</a></li><li><a href=#algorithm-r>Algorithm R</a></li><li><a href=#references>References</a></li></ul></nav></div></div><div class=content id=content><h2 id=random-sampling>Random sampling</h2><p>Explain with and without replacement. Begin with a visual explanation, only then switch to mathematical details</p><p>Motivate random sampling (huge amounts of data, sometimes impossible to get all of it, sometimes all of it is just too much to process, etc)</p><p>Consider the problem of random sampling where, from a given population of size $N$, we want to extract a sample of size $n$, with $n &lt; N$, such that not given item from the population was selected with higher probability than the remaining items and that this selection was performed without replacement.</p><p>To solve such a issue, we&rsquo;d begin by calculating what we will call the <strong>inclusion probability</strong>, $p$, which will be given by the quotient between the sample size and the population size, $p=n/N$. Since both $N$ and $n$ are taken to be larger than zero and $n &lt; N$, we have that $p$ is a proper probability, <em>i.e.</em>, it is between 0 and 1. Then, we&rsquo;d sequentially iterate over our population&rsquo;s items. For each item, we&rsquo;d generate a random number, $k$, between zero and one. If $k &lt; p$, then we add the item to our sample, otherwise, we discard it. Since this requires a single pass over the entire population, this algorithm trivially runs in $\mathcal{O}(N)$ time.</p><p>We could trivially take $n=0$. In other words, we can say that the sample we want to extract from our population contains no samples at all. Fortunately, our math and logic still holds since this would lead to an inclusion probability of zero.</p><p>Talk about $n=0$ as the sample of trivial size, and how our process holds for this case, since during iteration nothing would ever be selected.</p><p>Talk about $N=0$ being an ill-defined problem because there is no population. It does not make sense.</p><p>While thinking about this case might seem silly, it does serve as an important sanity check. For the situation above the calculation of the inclusion probability is very straightforward and thus there is no confusion or danger that $n=0$ might lead to $p \neq 0$, but this isn&rsquo;t always the case.</p><div class="details admonition note open"><div class="details-summary admonition-title"><i class="icon fas fa-pencil-alt fa-fw" aria-hidden=true></i>The Binomial Distribution<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><p>Let $X$ be a discrete random variable that represents the probability of obtaining $k$ successes in a series of $n$ independent trials with replacement, all of which with probability of success $p$. Then, $X$ is said to follow a Binomial distribution with parameters $n$ and $p$, $X \sim \text{Binomial}(n,p)$, and its probability density function is given by</p><p>$$\mathbb{P}(X=k) = \binom{n}{k} p^k \left( 1-p \right)^{n-k}.$$</p><p>Such random variable has expected value</p><p>$$\mathbb{E}[X] = np,$$</p><p>and variance</p><p>$$\text{Var}[X]=np(1-p).$$</p></div></div></div><div class="details admonition note open"><div class="details-summary admonition-title"><i class="icon fas fa-pencil-alt fa-fw" aria-hidden=true></i>The Hypergeometric Distribution<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><p>Let $X$ be a discrete random variable that represents the probability of obtaining $k$ successes in a series of $n$ draws without replacement, from a total population of $N$ samples, $K$ of which are synonymous with sucess. Then, $X$ is said to follow a Hypergeometric distribution with parameters $N$, $K$, and $n$, $X \sim \text{Hypergeometric}(N,K,n)$, and its probability density function is given by</p><p>$$\mathbb{P}(X = k) = \frac{\binom{K}{k} \binom{N-K}{n-k}}{\binom{N}{n}}$$</p><p>Such random variable has expected value</p><p>$$\mathbb{E}[X] = \frac{nK}{N},$$</p><p>and variance</p><p>$$\text{Var}[X]= \frac{nK}{N} \frac{N - K}{N} \frac{N-n}{N-1}.$$</p></div></div></div><h2 id=reservoir-sampling>Reservoir sampling</h2><p>Motivation, basic idea</p><h2 id=algorithm-r>Algorithm R</h2><p>description, correctness, example implementation</p><h2 id=references>References</h2><ul><li>Kai Lai Chung</li><li>Article on Algorithm R</li></ul></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2023-02-26</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>Luís Franco</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/katex/copy-tex.min.css><script type=text/javascript src=/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=/lib/lunr/lunr.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js></script><script type=text/javascript src=/lib/katex/auto-render.min.js></script><script type=text/javascript src=/lib/katex/copy-tex.min.js></script><script type=text/javascript src=/lib/katex/mhchem.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>